{"remainingRequest":"/Users/irinatin/workspace/java-final-capstone-team-3/vue_starter_java/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/irinatin/workspace/java-final-capstone-team-3/vue_starter_java/frontend/src/components/ReadingEvent.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/irinatin/workspace/java-final-capstone-team-3/vue_starter_java/frontend/src/components/ReadingEvent.vue","mtime":1586719967764},{"path":"/Users/irinatin/workspace/java-final-capstone-team-3/vue_starter_java/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/irinatin/workspace/java-final-capstone-team-3/vue_starter_java/frontend/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/irinatin/workspace/java-final-capstone-team-3/vue_starter_java/frontend/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/irinatin/workspace/java-final-capstone-team-3/vue_starter_java/frontend/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport axios from \"axios\"\n\nexport default {\n  components: {\n  },\n\n  props: {\n    apiURL: String\n  },\n  data() {\n    return {\n      showUsersButton: false,\n      showUsers: false,\n      showForm: false,\n      readingEvent: {\n          userId: '',\n          bookId: '',\n          readingTime: 0,\n          readingDate: '',\n          format: '',\n          completed: false\n      },\n      currentUser: {\n        userId: '',\n        userName: '',\n        password: '',\n        confirmPassword: '',\n        passwordMatching: '',\n        role: ''\n      },\n      books: [],\n      users: [],\n      formats: [\n        {\n          id: 1,\n          format: \"Paper\"\n        },\n        {\n          id: 2,\n          format: \"Digital/Kindle\"\n        },\n        {\n          id: 3,\n          format: \"Audiobook\"\n        },\n        {\n          id: 4,\n          format: \"Read-Aloud (Reader)\"\n        },\n        {\n          id: 5,\n          format: \"Read-Aloud (Listener)\"\n        },\n        {\n          id: 6,\n          format: \"Other\"\n        }\n      ]\n    };\n  },\n\n  methods: {\n    showFamUsersBtn(){\n      if (this.currentUser.role === \"user\"){\n      this.showUsersButton = true;\n      }\n    },\n\n    showFamUsers(){\n      console.log(this.currentUser);\n      if (this.currentUser.role === \"user\"){\n        this.showUsers = true;\n      }\n    },\n    showFormButton(){\n      this.showForm = true;\n    },\n    getBooks() {\n      axios\n        .get(`${process.env.VUE_APP_REMOTE_API}/api/getAllBooks`, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n          }\n        })\n        .then(response => {\n          console.log(response);\n          this.books = response.data;\n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n\n    selectUser() {\n      axios\n        .get(`${process.env.VUE_APP_REMOTE_API}/api/getUser`, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n          }\n        })\n        .then(response => {\n          console.log(response);\n          this.users = response.data;\n          \n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n\n    addReadingEvent() {\n      if (this.readingEvent.userId === ''){\n        this.readingEvent.userId = this.currentUser.id;\n      }\n\n      if (document.querySelector(\"#checkbox\").checked){\n        this.readingEvent.completed = true;\n      }\n      console.log(this.readingEvent);\n      axios\n        .post(\n          `${process.env.VUE_APP_REMOTE_API}/api/addReadingEvent`,\n          this.readingEvent,\n          {\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n            }\n          }\n        )\n        .then(response => {\n          console.log(response);\n          this.showForm = false;\n          alert(\"Your reading event has been saved, BookWorm!\");\n          this.readingEvent.userId = '';\n          this.readingEvent.bookId = '';\n          this.readingEvent.readingTime = 0;\n          this.readingEvent.readingDate = '';\n          this.readingEvent.format = '';\n          this.readingEvent.completed = false;\n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n     getCurrentUser() {\n      axios\n        .get(`${process.env.VUE_APP_REMOTE_API}/api/getCurrentUser`, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n          }\n        })\n        .then(response => {\n          console.log(response.data);\n          this.currentUser = response.data;\n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n\n  },\n\n  computed: {\n    isValidForm() {\n      return this.readingEvent > 0;\n    },\n\n    selectDate() {\n      return this.date;\n    },\n\n\n\n  }\n};\n",{"version":3,"sources":["ReadingEvent.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;AAIA;AACA","file":"ReadingEvent.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div>\n    <!-- <div class=\"header\">\n      <h2>Reading Event</h2>\n    </div> -->\n    <button v-on:click=\"getCurrentUser(); getBooks(); selectUser(); showFormButton(); showFamUsers();\">Create Reading Event</button>\n\n    <div v-if= \"showForm\"> \n    <select id=\"books\" v-on:click=\"showFamUsersBtn()\" v-model=\"readingEvent.bookId\">\n      <option v-for=\"book in books\" v-bind:key=\"book.id\" :value=\"book.id\">{{book.title}}</option>\n    </select>\n    <button v-if= \"showUsersButton\" v-on:click=\"showFamUsers()\">Enter Event for Different Family Members</button>\n    <select  v-if= \"showUsers\" id=\"users\" v-model=\"readingEvent.userId\">\n      <option v-for=\"user in users\" v-bind:key=\"user.id\" :value=\"user.id\">{{user.username}}</option>\n    </select>\n\n     <div class=\"form\">\n      <div class=\"form-input\">\n        <span class=\"label\">Enter Reading Time:</span>\n        <input type=\"number\" placeholder=\"In Minutes\" v-model=\"readingEvent.readingTime\"/>\n        \n      </div>\n    </div>\n\n    <div class=\"form\">\n      <div class=\"form-input\">\n        <span class=\"label\">Enter Reading Date:</span>\n        <input type=\"text\" placeholder=\"YYYY-MM-dd\" v-model=\"readingEvent.readingDate\"/>\n      </div>\n    </div>\n\n    <select id=\"format\" v-model=\"readingEvent.format\">\n      <option v-for=\"format in formats\" v-bind:key=\"format.id\">{{format.format}}</option>\n    </select> \n\n    <input type=\"checkbox\" id=\"checkbox\" v-model=\"readingEvent.completed\">\n    <label for=\"checkbox\">Completed</label>\n\n    <div>\n          <button v-on:click=\"addReadingEvent\">Submit</button>\n    </div>    \n    </div>\n\n\n  </div>\n</template>\n\n\n<script>\nimport axios from \"axios\"\n\nexport default {\n  components: {\n  },\n\n  props: {\n    apiURL: String\n  },\n  data() {\n    return {\n      showUsersButton: false,\n      showUsers: false,\n      showForm: false,\n      readingEvent: {\n          userId: '',\n          bookId: '',\n          readingTime: 0,\n          readingDate: '',\n          format: '',\n          completed: false\n      },\n      currentUser: {\n        userId: '',\n        userName: '',\n        password: '',\n        confirmPassword: '',\n        passwordMatching: '',\n        role: ''\n      },\n      books: [],\n      users: [],\n      formats: [\n        {\n          id: 1,\n          format: \"Paper\"\n        },\n        {\n          id: 2,\n          format: \"Digital/Kindle\"\n        },\n        {\n          id: 3,\n          format: \"Audiobook\"\n        },\n        {\n          id: 4,\n          format: \"Read-Aloud (Reader)\"\n        },\n        {\n          id: 5,\n          format: \"Read-Aloud (Listener)\"\n        },\n        {\n          id: 6,\n          format: \"Other\"\n        }\n      ]\n    };\n  },\n\n  methods: {\n    showFamUsersBtn(){\n      if (this.currentUser.role === \"user\"){\n      this.showUsersButton = true;\n      }\n    },\n\n    showFamUsers(){\n      console.log(this.currentUser);\n      if (this.currentUser.role === \"user\"){\n        this.showUsers = true;\n      }\n    },\n    showFormButton(){\n      this.showForm = true;\n    },\n    getBooks() {\n      axios\n        .get(`${process.env.VUE_APP_REMOTE_API}/api/getAllBooks`, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n          }\n        })\n        .then(response => {\n          console.log(response);\n          this.books = response.data;\n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n\n    selectUser() {\n      axios\n        .get(`${process.env.VUE_APP_REMOTE_API}/api/getUser`, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n          }\n        })\n        .then(response => {\n          console.log(response);\n          this.users = response.data;\n          \n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n\n    addReadingEvent() {\n      if (this.readingEvent.userId === ''){\n        this.readingEvent.userId = this.currentUser.id;\n      }\n\n      if (document.querySelector(\"#checkbox\").checked){\n        this.readingEvent.completed = true;\n      }\n      console.log(this.readingEvent);\n      axios\n        .post(\n          `${process.env.VUE_APP_REMOTE_API}/api/addReadingEvent`,\n          this.readingEvent,\n          {\n            headers: {\n              Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n            }\n          }\n        )\n        .then(response => {\n          console.log(response);\n          this.showForm = false;\n          alert(\"Your reading event has been saved, BookWorm!\");\n          this.readingEvent.userId = '';\n          this.readingEvent.bookId = '';\n          this.readingEvent.readingTime = 0;\n          this.readingEvent.readingDate = '';\n          this.readingEvent.format = '';\n          this.readingEvent.completed = false;\n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n     getCurrentUser() {\n      axios\n        .get(`${process.env.VUE_APP_REMOTE_API}/api/getCurrentUser`, {\n          headers: {\n            Authorization: \"Bearer \" + localStorage.getItem(\"Authorization\")\n          }\n        })\n        .then(response => {\n          console.log(response.data);\n          this.currentUser = response.data;\n        })\n        .catch(error => {\n          console.log(error + \" there was an error\");\n        });\n    },\n\n  },\n\n  computed: {\n    isValidForm() {\n      return this.readingEvent > 0;\n    },\n\n    selectDate() {\n      return this.date;\n    },\n\n\n\n  }\n};\n</script>\n\n\n<style>\n</style>\n"]}]}